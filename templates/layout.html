<!doctype html>
<html lang="en">
  <head>
    <meta charset="utf-8">
    <meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">
    <meta name="description" content="Libra Blockchain Explorer, support libra testnet and any other libra-swarm">
    <title>Libra Explorer powered by MoveOnLibra</title>
    <link rel="stylesheet" href="https://maxcdn.bootstrapcdn.com/bootstrap/4.0.0/css/bootstrap.min.css" integrity="sha384-Gn5384xqQ1aoWXA+058RXPxPg6fy4IWvTNh0E263XmFcJlSAwiGgFAW/dAiS6JXm" crossorigin="anonymous">
    <script
      src="https://code.jquery.com/jquery-3.4.1.min.js"
      integrity="sha256-CSXorXvZcTkaix6Yvo6HppcZGetbYMGWSFlBw8HfCJo="
      crossorigin="anonymous"></script>
    <script src="https://cdnjs.cloudflare.com/ajax/libs/popper.js/1.12.9/umd/popper.min.js" integrity="sha384-ApNbgh9B+Y1QKtv3Rn7W3mgPxhU9K/ScQsAP7hUibX39j7fakFPskvXusvfa0b4Q" crossorigin="anonymous"></script>
    <script src="https://maxcdn.bootstrapcdn.com/bootstrap/4.0.0/js/bootstrap.min.js" integrity="sha384-JZR6Spejh4U02d8jOt6vLEHfe/JQGiRRSQQxSfFWpi1MquVdAyjUar5+76PVCmYl" crossorigin="anonymous"></script>
    <style>
      .gradient_bg {
        background-image: linear-gradient(180deg, #536bbb 0%, rgb(131, 144, 241) 100%);
      }
    </style>

  </head>

  <body>


    <div class="d-flex flex-column flex-md-row align-items-center p-3 px-md-4 mb-3 bg-white border-bottom box-shadow">
      <a href="http://www.MoveOnLibra.com" target="_blank"><img src="/static/mol_60.png" alt="Move On Libra" id="site-logo"></a>
      <h5 class="my-0 mr-md-auto font-weight-normal"></h5>
      <nav class="my-2 my-md-0 mr-md-3">
        <a class="p-2 text-dark" href="/">Home</a>
        <a class="p-2 text-dark" href="/transactions">Transactions</a>
        <a class="p-2 text-dark" href="/accounts">Accounts</a>
      </nav>
      <button type="button" class="btn btn-outline-primary" data-toggle="modal" data-target="#networkModal">
        Select Network
      </button>
    </div>


<main id="content" role="main">
  <div class="container mb-4">

  {% with messages = get_flashed_messages() %}
    {% if messages %}
      <div class="row justify-content-around">
      {% for message in messages %}
        <pre class="text-danger">{{ message }}</pre>
      {% endfor %}
      </div>
    {% endif %}
  {% endwith %}

  <div class="py-3">
      <form class="input-group mb-2" action="/search" method="GET" autocomplete="off" spellcheck="false">
      <input type="search" name="q" class="form-control" placeholder="Search by Address / Transaction ID (Version)" required="" autocomplete="off">
      <div class="input-group-append">
      <button class="btn btn-primary" type="submit" aria-label="search">Search
      </button>
      </div>
      </form>
  </div>
  </div>

  {% block content %}{% endblock %}
</main>


<!-- Modal -->
<div class="modal fade" id="networkModal" tabindex="-1" role="dialog" aria-labelledby="exampleModalLabel" aria-hidden="true">
  <div class="modal-dialog modal-lg" role="document">
    <div class="modal-content">
      <div class="modal-header">
        <h5 class="modal-title" id="exampleModalLabel">Select Libra Network</h5>
        <button type="button" class="close" data-dismiss="modal" aria-label="Close">
          <span aria-hidden="true">&times;</span>
        </button>
      </div>
      <div class="modal-body">
        <p>Current Network:</p>
        <div class="input-group">
          <div class="input-group-prepend">
            <span class="input-group-text" id="">{{network}}</span>
          </div>
          <input type="text" class="form-control col-md-6" value="{{network_address}}" readonly="readonly">
          <input type="text" class="form-control col-md-3" value="{{network_port}}" readonly="readonly">
        </div>
        <hr/>
        <p>Change Network:</p>
{% if network != "Testnet" %}
        <div class="input-group">
          <div class="input-group-prepend">
            <div class="input-group-text">
            <input type="radio" aria-label="Testnet" name="network" value="Testnet">
            </div>
          </div>
          <div class="input-group-prepend">
            <span class="input-group-text" id="">Testnet</span>
          </div>
          <input type="text" class="form-control col-md-6" value="ac.testnet.libra.org" readonly="readonly">
          <input type="text" class="form-control col-md-3" value="8000" readonly="readonly">
        </div>
        <br/>
{% endif %}
{% if network != "Devnet" %}
        <div class="input-group">
          <div class="input-group-prepend">
            <div class="input-group-text">
            <input type="radio" aria-label="Devnet" name="network" value="Devnet">
            </div>
          </div>
          <div class="input-group-prepend">
            <span class="input-group-text" id="">Devnet</span>
          </div>
          <input type="text" class="form-control col-md-6" value="apitest.moveonLibra.com" readonly="readonly">
          <input type="text" class="form-control col-md-3" value="33333" readonly="readonly">
        </div>
        <br/>
{% endif %}
        <div class="input-group">
          <div class="input-group-prepend">
            <div class="input-group-text">
            <input type="radio" aria-label="Other"  name="network" value="Other">
            </div>
          </div>
          <div class="input-group-prepend">
            <span class="input-group-text" id="">&nbsp;Other&nbsp;</span>
          </div>
          <input id="network_ip" type="text" class="form-control col-md-6" placeholder="Hostname/IP address">
          <input id="network_port" type="number" class="form-control col-md-3" placeholder="AC port">
        </div>
      </div>
      <div class="modal-footer">
        <button type="button" class="btn btn-secondary" data-dismiss="modal">Close</button>
        <button type="button" class="btn btn-primary" onclick="changeNetwork()">Change Network</button>
      </div>
    </div>
  </div>
</div>

<script type="text/javascript">
  function changeNetwork(){
    var network = $('input[name=network]:checked').val();
    if(network){
      if(network == "Testnet"){
        window.location = "//explorer.moveonLibra.com"
      }else if(network == "Devnet"){
        window.location = "//devnet.explorer.moveonLibra.com"
      }else if(network == "Other"){
        var network_ip = $('#network_ip').val();
        var network_port = $('#network_port').val();
        if(network_ip && network_port){
          var url = "http://"+network_ip+"-"+network_port+".explorer.moveonLibra.com"
          //alert("You are leave this site to another website: "+url);
          window.location = url;
        }else{
          alert("Please input network address and port for other network.")
        }
      }else{
        console.log("Unknown network"+network);
      }
      //$('#networkModal').modal('hide');
    }
  }
</script>

<style>
    footer .footer-bottom.slim {
      padding-top: 20px;
      position: relative;
    }
    footer .footer-bottom.slim .copyright {
      text-align: center;
      margin-top: 0px;
      margin-bottom: 20px;
    }
    footer .footer-bottom .copyright {
      font-weight: 400;
      font-size: 14px;
      line-height: 24px;
      color: #F3F8FF;
      letter-spacing: 1.7px;
      text-align: left;
      margin-top: -15px;
      margin-bottom: 50px;
    }
</style>

<footer id="contact" style="background-image: linear-gradient(134deg, #516093 0%, #7A88F1 100%);">
    <div class="footer-bottom slim">
      <div class="container">
        <div class="row">
          <div class="col-lg-12">
            <p class="copyright" style="color: white">2019 Â© Developed and hosted by <a href="https://www.MoveOnLibra.com" style="color: white"><strong>Move On Libra</strong></a></p>
          </div>
        </div>
      </div>
    </div>
</footer>

  </body>
</html>